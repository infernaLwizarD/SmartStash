<% url = url || nil %>
<%= form_with(model: @field, url: url) do |form| %>
  <div class="card card-primary">
    <div class="card-header">
      <h3 class="card-title m-0">Шаблон</h3>
      <div class="card-tools">
        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
      </div>
    </div>

    <div class="card-body">
      <%= render 'web/shared/error_messages', resource: @field %>
      <div class="form-group">
        <%= form.label :field_type, 'Тип поля' %>
        <%= form.select :field_type, Collection::Field.field_type_collection,
                        { include_blank: '[Выберите тип поля]' }, class: 'form-control form-control-sm' %>
      </div>

      <div class="form-group">
        <%= form.label :sort_order, '№ (Порядок сортировки)' %>
        <%= form.number_field :sort_order, class: 'form-control form-control-sm', value: @field.new_record? ? Collection::Field.max_sort_order_by_item(params[:item_id]) + 1 : @field.sort_order %>
      </div>
    </div>

    <div class="card-footer">
      <%= link_to icon('fas', 'arrow-left', 'Назад'), back_path, class: 'btn btn-secondary' %>
      <%= form.submit 'Сохранить', class: 'btn btn-success float-right' %>
    </div>
  </div>
<% end %>